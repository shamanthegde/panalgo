<!DOCTYPE html>
<html>
  <head>
	  <title>Panalgo.io</title>
	  <meta charset="utf-8" />
	  <link rel="icon" type="image/png" href="favicon.ico">
	  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
	  <meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0' name='viewport' />
	  <meta name="viewport" content="width=device-width" />
  <link rel="stylesheet" href="css/bootstrap.css" type="text/css">
<link rel="stylesheet" href="css/dashboard.css" type="text/css">
<link rel="stylesheet" href="css/datatables.css" type="text/css">
<link rel="stylesheet" href="css/fontawesome.css" type="text/css">
<link rel="stylesheet" href="css/roboto.css" type="text/css">
<link rel="stylesheet" href="css/select.css" type="text/css">

<link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.14/themes/base/jquery-ui.css" type="text/css">

<style>
	/* The switch - the box around the slider */
	.switch {
		position: relative;
		display: inline-block;
		width: 60px;
		height: 34px;
	}

	/* Hide default HTML checkbox */
	.switch input {display:none;}

	/* The slider */
	.slider {
		position: absolute;
		cursor: pointer;
		top: 0;
		left: 0;
		right: 0;
		bottom: 0;
		background-color: #ccc;
		-webkit-transition: .4s;
		transition: .4s;
	}

	.slider:before {
		position: absolute;
		content: "";
		height: 26px;
		width: 26px;
		left: 4px;
		bottom: 4px;
		background-color: white;
		-webkit-transition: .4s;
		transition: .4s;
	}

	input:checked + .slider {
		background-color: #2196F3;
	}

	input:focus + .slider {
		box-shadow: 0 0 1px #2196F3;
	}

	input:checked + .slider:before {
		-webkit-transform: translateX(26px);
		-ms-transform: translateX(26px);
		transform: translateX(26px);
	}

	/* Rounded sliders */
	.slider.round {
		border-radius: 34px;
	}

	.slider.round:before {
		border-radius: 50%;
	}
</style>
<script src="http://code.jquery.com/jquery-1.10.2.js"></script>
<script src="http://code.jquery.com/ui/1.11.4/jquery-ui.js"></script>
<script type="text/javascript" src="js/application.js"></script>
<script type="text/javascript" src="js/bootstrap.js"></script>
<script type="text/javascript" src="js/cable.js"></script>
<script type="text/javascript" src="js/dashboard.js"></script>
<script type="text/javascript" src="js/datatables.js"></script>
<script type="text/javascript" src="js/highcharts.js"></script>
<script type="text/javascript" src="js/mainland.js"></script>
<script type="text/javascript" src="js/map.js"></script>
<script type="text/javascript" src="js/mootools.js"></script>
<script type="text/javascript" src="js/proj4.js"></script>
<script type="text/javascript" src="js/select.js"></script>
 

  </head>

  <body>
        <div class="wrapper">
        <div class="sidebar" data-color="purple">
            <div class="sidebar-wrapper">
                <div class="logo">
                 <a href="home.html" class="simple-text">        
                    Panalgo.io
                </a>
            </div>

            <ul class="nav">
               
    <li><a href="migraine.html">Dashboard</a></li>

    <li class="active"><a href="migraine-data.html">Submit Data</a></li>
 
        </ul>
    </div>
</div>

<div class="main-panel">
    <nav class="navbar fixed-top navbar-default navbar-fixed">
        <div class="container-fluid">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="navigation-example-2">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
            </div>
            <div class="collapse navbar-collapse">


                <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="home.html" onclick="logout()">
                            <p>Log out</p>
                        </a>
                    </li>
                    <li class="separator hidden-lg hidden-md"></li>
                </ul>
            </div>
        </div>
    </nav>


    
    <div class="content">
        <div class="container-fluid">



       
    <!-- Table Row -->
        <div class="row">
            <div class="container-fluid" align="center">

<h3 class="title" align="center"><strong>Data Entry Form</strong></h2>
            <div id="map1" class="card ">
                    <div class="header">
                        <h4 class="title">Please Enter Your Recent Risk Factor History</h4>
		                        <div class="content">
			                        <p class="category"><br></p>
			                        <p class="category"> </p>
			                   
		                		</div>
		                		<div class="content">
			                        <p class="category">1. Please enter your current perceived stress level</p>
			                        <p class="category"> </p>
			                        <div id="stress"></div>

									<p class="category"><span id="stress-value"></span></p>
			                   
		                		</div>
		                		<div class="content">
			                        <p class="category"><br>2. Please enter your current perceived anxiety level</p>
			                        <p class="category"> </p>
			                        <div id="anxiety"></div>

									<p class="category"><span id="anxiety-value"></span></p>
			                   
		                		</div>
		                		<div class="content">
			                        <p class="category"><br>3. How many hours of sleep did you get last night? </p>
			                        <p class="category"> </p>
			                        <input id="sleep" type="number">
			                   
		                		</div>
		                		
		                		<div class="content" align="center">
			                        <p class="category"  align="center"><br>4. Have you had ANY chocolate today?</p>
			                         <p class="category"  align="center">
			                        	<label class="switch" style="background-color: white !important;">
										  <input id="chocolate" type="checkbox">
										  <span class="slider round"></span>
										</label>
									 </p>
		                		</div>
		                		<div class="content">
			                        <p class="category"><br>5. Have you had ANY cheese today?</p>
			                        <p class="category"  align="center">
			                        	<label class="switch" style="background-color: white !important;">
										  <input id="cheese" type="checkbox">
										  <span class="slider round"></span>
										</label>
									</p>
			                   
		                		</div>
		                		<div class="content">
			                        <p class="category"><br>6. Have you experienced a sinus flare-up today?</p>
			                       <p class="category"  align="center">
			                        	<label class="switch" style="background-color: white !important;">
										  <input id="sinus" type="checkbox">
										  <span class="slider round"></span>
										</label>
									</p>
			                   
		                		</div>
		                		<div class="content">
			                        <p class="category"><br>7. Have you had any caffeine today? </p>
			                        <p class="category"  align="center">
			                        	<label class="switch" style="background-color: white !important;">
										  <input id="caffeine" type="checkbox">
										  <span class="slider round"></span>
										</label>
									</p>
			                   
		                		</div>
		                		<div class="content">
			                        <p class="category"><br>8. Have you skipped any meal(s) today? </p>
			                        <p class="category"  align="center">
			                        	<label class="switch" style="background-color: white !important;">
										  <input id="skippedmeals" type="checkbox">
										  <span class="slider round"></span>
										</label>
									</p>
			                   
		                		</div>
		                		<div class="content">
			                        <button class="btn btn-primary" id="mainsubmit" type="button" onclick="$('#popup').modal('show');">Upload and Run Algorithm</button>
			                   
		                		</div>

                    </div>
                  
             </div>

            </div>
           
        </div>
        <!-- /.row -->  

    </div>
</div>
  <!--<div id="popup">-->
        <!--<h4>Results</h4>-->
        <!--<p>Your Migraine Prediction in a 5-hour window is: <span id="prediction-result"></span></p>-->
        <!--<a href="dashboard.html" id="close_popup">Close</a>-->
    <!--</div>-->
    <!--<a href="#popup" id="open_popup">Open popup</a>-->



<footer class="footer">
    <div class="container-fluid">

    </div>
</footer>
</div>
		</div>
		<div class="modal fade" id="popup">
			<div class="modal-dialog" role="document">
				<div class="modal-content">
					<div class="modal-header">
						<h5 class="modal-title">Result</h5>
						<button type="button" class="close" data-dismiss="modal" aria-label="Close">
							<span aria-hidden="true">&times;</span>
						</button>
					</div>
					<div class="modal-body">
						<p>Your Migraine Prediction in a 5-hour window is: <span id="prediction-result"></span></p>
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-primary"><a href="dashboard.html">Okay</a></button>
					</div>
				</div>
			</div>
		</div>
  </body>


</html>
<script>

var stressval = 0;
var anxietyval = 0;

$("#stress").slider(
{
            value:0,
            min: 0,
            max: 100,
            step: 10,
            slide: function( event, ui ) {
                $( "#stress-value" ).html( ui.value );
                stressval = ui.value;
            }
}
);

$( "#stress-value" ).html(  $('#stress').slider('value') );

$("#anxiety").slider(
{
            value:0,
            min: 0,
            max: 100,
            step: 10,
            slide: function( event, ui ) {
                $( "#anxiety-value" ).html( ui.value );
                anxietyval = ui.value;
            }
}
);

$( "#anxiety-value" ).html(  $('#anxiety').slider('value') );



$('#mainsubmit').on('click', function(){

var chocolateval = $('#chocolate:checked').val() == "on";
var cheeseval = $('#cheese:checked').val() == "on";

var sinusval = $('#sinus:checked').val() == "on";

var caffeineval = $('#caffeine:checked').val() == "on";

var skippedmealsval = $('#skippedmeals:checked').val() == "on";

	$.post( "http://pain-team.herokuapp.com/report", 
		{ 
			user_id: 1, 
			stress: stressval,
			anxiety: anxietyval,
			sleep_time: 8,
			chocolate: chocolateval,
			cheese: cheeseval,
			sinus: sinusval,
			caffeine: caffeineval,
			skipped_meal: skippedmealsval
	},
	function(result){

//    $("#popup").css("display", "block");
    var res;
    if(result.result)
    	res = "High Risk";
    else
    	res = "Safe";
     
    $("#prediction-result").html(res);


//  $("#close_popup").click(function(){
//    $("#popup").css("display", "none");
//  });

	}
	);
});

function eraseCookie(name) {
    createCookie(name,"",-1);
}

function logout() {
    eraseCookie('panalgo-user-name');
    eraseCookie('panalgo-user-id');
}
</script>




